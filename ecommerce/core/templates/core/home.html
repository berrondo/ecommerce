{% extends 'base.html' %}
{% load static %}

{% block title %}Home{% endblock %}

{% block content %}

{% if user.is_authenticated %}
  Ol&aacute;, {{ user.get_username }}! <a href="{% url 'logout' %}">logout</a>
{% else %}
  <p>Voc&ecirc; presisa fazer <a href="{% url 'login' %}">login</a></p>
{% endif %}

<hr />
<p>seus pedidos</p>
<ol>
{% for order in orders %}
    <p>{{ order }} ({{ order.satus }})</p>
    {% for pick in order.picks.all %}
    <form method="post" action="{% url 'index' %}">{% csrf_token %}
        <li>{{ pick.product.name }}, $ {{ pick.product.price }} <input type="number" name="qtd" value="{{ pick.quantity }}" min="0" style="width:50px">
            <input type="hidden" name="_method" value="DELETE"> 
            <input type="hidden" name="pick_id" value="{{ pick.id }}"> 
            <input type="submit" value="alterar"> ou <input type="submit" value="excluir">
        </li>
    </form>
    {% endfor %}
{% endfor %}
<p><a href="">fechar pedido</a></p>
</ol>

<p>produtos:</p>
    <ol>
    {% for product in products %}
        <form method="post" action="{% url 'index' %}">{% csrf_token %}
            <li>{{ product.name }}, $ {{ product.price }} <input type="number" name="qtd" value="1" min="1" style="width:50px">
                <input type="hidden" name="user_id" value="{{ user.id }}"> 
                <input type="hidden" name="order_id" value="{{ order_id }}"> 
                <input type="hidden" name="product_id" value="{{ product.id }}">
                <input type="submit" value="comprar">
            </li>
        </form>
    {% endfor %}
    </ol>
<hr />
<p>Ol&aacute;, manager</p>
<p>cadastrar produtos | todos os pedidos</p>


{% endblock %}